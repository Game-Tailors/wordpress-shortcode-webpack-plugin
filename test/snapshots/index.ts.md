# Snapshot report for `test/index.ts`

The actual snapshot is saved in `index.ts.snap`.

Generated by [AVA](https://avajs.dev).

## Plugin file is created

> Snapshot 1

    `<?php␊
      /**␊
       * Plugin Name: My Plugin␊
       */␊
    ␊
      $manifest = [␊
    		'main' => [␊
    			'main.js',␊
    		],␊
    	];␊
    ␊
      function create_main_app() {␊
        enqueue_assets('main');␊
    ␊
        return '<div id="root"></div>';␊
      }␊
    ␊
      function register_my_plugin_entries() {␊
    		add_shortcode('my-plugin-main', 'create_main_app');␊
    		register_assets('main');␊
      }␊
    ␊
      add_action('init', 'register_my_plugin_entries');␊
    ␊
    	/**␊
    	 * Loader utils␊
    	 */␊
    	␊
    	function str_ends_with( $haystack, $needle ) {␊
    	  $length = strlen( $needle );␊
    	  if( !$length ) {␊
    	      return true;␊
    	  }␊
    	  return substr( $haystack, -$length ) === $needle;␊
    	}␊
    	␊
    	function is_js($path) {␊
    	  return str_ends_with($path, "js");␊
    	}␊
    	␊
    	function is_css($path) {␊
    	  return str_ends_with($path, "css");␊
    	}␊
    	␊
    	function get_js_for_entrypoint($entrypoint) {␊
    	  $assets = $manifest[$entrypoint];␊
    	  $js = array_filter($assets, "is_js");␊
    	  return $js;␊
    	}␊
    	␊
    	function get_css_for_entrypoint($entrypoint) {␊
    	  $assets = $manifest[$entrypoint];␊
    	  $css = array_filter($assets, "is_css");␊
    	  return $css;␊
    	}␊
    	␊
    	function register_assets($entrypoint) {␊
    	  $js = get_js_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($js as &$script) {␊
    	    wp_register_script($script, plugins_url($script));␊
    	  }␊
    	␊
    	  $css = get_css_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($css as &$style) {␊
    	    wp_register_style($style, plugins_url($style));␊
    	  }␊
    	}␊
    	␊
    	function enqueue_assets($entrypoint) {␊
    	  $js = get_js_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($js as &$script) {␊
    	    wp_enqueue_script($script);␊
    	  }␊
    	␊
    	  $css = get_css_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($css as &$style) {␊
    	    wp_enqueue_style($style);␊
    	  }␊
    	}␊
    ?>`

## Plugin header is generated correctly

> Snapshot 1

    `<?php␊
      /**␊
       * Plugin Name: My Plugin␊
       * Plugin URI: https://foo.bar␊
       * Description: A test plugin␊
       * Version: 1.2.3␊
       * Requires at least: 1.0.0␊
       * Requires PHP: 1.3.4␊
       * Author: Tom Lagier␊
       * Author URI: https://lagiers.studio␊
       * License: MIT␊
       * License URI: https://mit.license␊
       * Text Domain: https://foo.bar␊
       * Domain Path: https://bar.baz␊
       * Network: true␊
       */␊
    ␊
      $manifest = [␊
    		'main' => [␊
    			'main.js',␊
    		],␊
    	];␊
    ␊
      function create_main_app() {␊
        enqueue_assets('main');␊
    ␊
        return '<div id="root"></div>';␊
      }␊
    ␊
      function register_my_plugin_entries() {␊
    		add_shortcode('my-plugin-main', 'create_main_app');␊
    		register_assets('main');␊
      }␊
    ␊
      add_action('init', 'register_my_plugin_entries');␊
    ␊
    	/**␊
    	 * Loader utils␊
    	 */␊
    	␊
    	function str_ends_with( $haystack, $needle ) {␊
    	  $length = strlen( $needle );␊
    	  if( !$length ) {␊
    	      return true;␊
    	  }␊
    	  return substr( $haystack, -$length ) === $needle;␊
    	}␊
    	␊
    	function is_js($path) {␊
    	  return str_ends_with($path, "js");␊
    	}␊
    	␊
    	function is_css($path) {␊
    	  return str_ends_with($path, "css");␊
    	}␊
    	␊
    	function get_js_for_entrypoint($entrypoint) {␊
    	  $assets = $manifest[$entrypoint];␊
    	  $js = array_filter($assets, "is_js");␊
    	  return $js;␊
    	}␊
    	␊
    	function get_css_for_entrypoint($entrypoint) {␊
    	  $assets = $manifest[$entrypoint];␊
    	  $css = array_filter($assets, "is_css");␊
    	  return $css;␊
    	}␊
    	␊
    	function register_assets($entrypoint) {␊
    	  $js = get_js_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($js as &$script) {␊
    	    wp_register_script($script, plugins_url($script));␊
    	  }␊
    	␊
    	  $css = get_css_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($css as &$style) {␊
    	    wp_register_style($style, plugins_url($style));␊
    	  }␊
    	}␊
    	␊
    	function enqueue_assets($entrypoint) {␊
    	  $js = get_js_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($js as &$script) {␊
    	    wp_enqueue_script($script);␊
    	  }␊
    	␊
    	  $css = get_css_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($css as &$style) {␊
    	    wp_enqueue_style($style);␊
    	  }␊
    	}␊
    ?>`

## Plugin template is used if provided

> Snapshot 1

    `"use strict";␊
    console.log('This is a test template');␊
    `

## Entry to root map is honored

> Snapshot 1

    `"use strict";␊
    console.log('This is a test template');␊
    fest = [␊
    		'main' => [␊
    			'main.js',␊
    		],␊
    	];␊
    ␊
      function create_main_app() {␊
        enqueue_assets('main');␊
    ␊
        return '<div id="some-id"></div>';␊
      }␊
    ␊
      function register_my_plugin_entries() {␊
    		add_shortcode('my-plugin-main', 'create_main_app');␊
    		register_assets('main');␊
      }␊
    ␊
      add_action('init', 'register_my_plugin_entries');␊
    ␊
    	/**␊
    	 * Loader utils␊
    	 */␊
    	␊
    	function str_ends_with( $haystack, $needle ) {␊
    	  $length = strlen( $needle );␊
    	  if( !$length ) {␊
    	      return true;␊
    	  }␊
    	  return substr( $haystack, -$length ) === $needle;␊
    	}␊
    	␊
    	function is_js($path) {␊
    	  return str_ends_with($path, "js");␊
    	}␊
    	␊
    	function is_css($path) {␊
    	  return str_ends_with($path, "css");␊
    	}␊
    	␊
    	function get_js_for_entrypoint($entrypoint) {␊
    	  $assets = $manifest[$entrypoint];␊
    	  $js = array_filter($assets, "is_js");␊
    	  return $js;␊
    	}␊
    	␊
    	function get_css_for_entrypoint($entrypoint) {␊
    	  $assets = $manifest[$entrypoint];␊
    	  $css = array_filter($assets, "is_css");␊
    	  return $css;␊
    	}␊
    	␊
    	function register_assets($entrypoint) {␊
    	  $js = get_js_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($js as &$script) {␊
    	    wp_register_script($script, plugins_url($script));␊
    	  }␊
    	␊
    	  $css = get_css_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($css as &$style) {␊
    	    wp_register_style($style, plugins_url($style));␊
    	  }␊
    	}␊
    	␊
    	function enqueue_assets($entrypoint) {␊
    	  $js = get_js_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($js as &$script) {␊
    	    wp_enqueue_script($script);␊
    	  }␊
    	␊
    	  $css = get_css_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($css as &$style) {␊
    	    wp_enqueue_style($style);␊
    	  }␊
    	}␊
    ?>`

## Entry to root ID map is honored

> Snapshot 1

    `<?php␊
      /**␊
       * Plugin Name: My Plugin␊
       */␊
    ␊
      $manifest = [␊
    		'main' => [␊
    			'main.js',␊
    		],␊
    	];␊
    ␊
      function create_main_app() {␊
        enqueue_assets('main');␊
    ␊
        return '<div id="some-id"></div>';␊
      }␊
    ␊
      function register_my_plugin_entries() {␊
    		add_shortcode('my-plugin-main', 'create_main_app');␊
    		register_assets('main');␊
      }␊
    ␊
      add_action('init', 'register_my_plugin_entries');␊
    ␊
    	/**␊
    	 * Loader utils␊
    	 */␊
    	␊
    	function str_ends_with( $haystack, $needle ) {␊
    	  $length = strlen( $needle );␊
    	  if( !$length ) {␊
    	      return true;␊
    	  }␊
    	  return substr( $haystack, -$length ) === $needle;␊
    	}␊
    	␊
    	function is_js($path) {␊
    	  return str_ends_with($path, "js");␊
    	}␊
    	␊
    	function is_css($path) {␊
    	  return str_ends_with($path, "css");␊
    	}␊
    	␊
    	function get_js_for_entrypoint($entrypoint) {␊
    	  $assets = $manifest[$entrypoint];␊
    	  $js = array_filter($assets, "is_js");␊
    	  return $js;␊
    	}␊
    	␊
    	function get_css_for_entrypoint($entrypoint) {␊
    	  $assets = $manifest[$entrypoint];␊
    	  $css = array_filter($assets, "is_css");␊
    	  return $css;␊
    	}␊
    	␊
    	function register_assets($entrypoint) {␊
    	  $js = get_js_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($js as &$script) {␊
    	    wp_register_script($script, plugins_url($script));␊
    	  }␊
    	␊
    	  $css = get_css_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($css as &$style) {␊
    	    wp_register_style($style, plugins_url($style));␊
    	  }␊
    	}␊
    	␊
    	function enqueue_assets($entrypoint) {␊
    	  $js = get_js_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($js as &$script) {␊
    	    wp_enqueue_script($script);␊
    	  }␊
    	␊
    	  $css = get_css_for_entrypoint($entrypoint);␊
    	␊
    	  foreach ($css as &$style) {␊
    	    wp_enqueue_style($style);␊
    	  }␊
    	}␊
    ?>`
